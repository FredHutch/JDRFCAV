<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JDRF Single run • JDRFCAV</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="JDRF Single run">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">JDRFCAV</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/V_JDRF_1_selected_model.html">JDRF Single run</a>
    </li>
    <li>
      <a href="../articles/V_JDRF_2_benchmark_sensitivity.html">JDRF Sensitivity / Benchmark</a>
    </li>
    <li>
      <a href="../articles/V_JDRF_3_resample_cross_validation.html">JDRF resample / cross-validation</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>JDRF Single run</h1>
                        <h4 class="author">Dror Berel</h4>
            
            <h4 class="date">2019-02-01</h4>
      
      
      <div class="hidden name"><code>V_JDRF_1_selected_model.Rmd</code></div>

    </div>

    
    
<p>Raw data Loading<br>
Pre-processing<br>
Model training<br>
Model performance<br>
Model diagnostics</p>
<div id="load-raw-data-sets" class="section level1">
<h1 class="hasAnchor">
<a href="#load-raw-data-sets" class="anchor"></a>1. Load raw data sets</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">data_task <span class="co"># mlr's task format. currently non-functional, so require sep</span></a></code></pre></div>
<pre><code>## Supervised task: mlr.Data
## Type: regr
## Target: cpep_model_decayrate
## Observations: 31
## Features:
##    numerics     factors     ordered functionals 
##       76746           0           0           0 
## Missings: TRUE
## Has weights: FALSE
## Has blocking: FALSE
## Has coordinates: FALSE</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">JDRF_modules_sets_tibble <span class="co"># modules lists </span></a></code></pre></div>
<pre><code>## # A tibble: 10 x 2
##    Gmt.name            GMT.list      
##    &lt;chr&gt;               &lt;list&gt;        
##  1 BMT                 &lt;list [346]&gt;  
##  2 c5-GO               &lt;list [1,454]&gt;
##  3 c7-immunologic      &lt;list [4,872]&gt;
##  4 h-Hallmark          &lt;list [50]&gt;   
##  5 B.affy              &lt;list [15]&gt;   
##  6 M.RNAseq.cell       &lt;list [9]&gt;    
##  7 M.RNAseq.CD4        &lt;list [10]&gt;   
##  8 M.RNAseq.CD8        &lt;list [17]&gt;   
##  9 M.RNAseq.Monocyte   &lt;list [8]&gt;    
## 10 M.RNAseq.Wholeblood &lt;list [23]&gt;</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">modules_sets_combined_l&lt;-<span class="kw"><a href="../reference/Wrapper_Filter_1_helpers.html">Fun_Load_module_sets</a></span>(JDRF_modules_sets_tibble) <span class="co">## gene &lt;-&gt; module/pathway/set annotations</span></a></code></pre></div>
</div>
<div id="mlrs-learner-setup" class="section level1">
<h1 class="hasAnchor">
<a href="#mlrs-learner-setup" class="anchor"></a>2. mlr’s learner setup</h1>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">lrn.glmnet.<span class="fl">1.</span>orig&lt;-<span class="kw">makeLearner</span>(<span class="dt">cl=</span> <span class="st">"regr.cvglmnet"</span>, <span class="dt">par.vals =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">alpha=</span><span class="dv">1</span>, <span class="dt">s=</span><span class="st">'lambda.min'</span>) ) <span class="co"># s will be override, so value does not matter. if not specified, mlr will assign s=0.01</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="co"># lrn.glmnet.1.orig$par.vals</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="co"># lrn.glmnet.1.orig$par.set</span></a>
<a class="sourceLine" id="cb6-4" title="4"></a>
<a class="sourceLine" id="cb6-5" title="5">lrn_PreProcess_glmnet&lt;-<span class="kw"><a href="../reference/Wrapper_Filter_3_makePrep_MaG.html">Fun_lrn_univ_Clusters_All_makePrep_MaG</a></span>(lrn.glmnet.<span class="fl">1.</span>orig,</a>
<a class="sourceLine" id="cb6-6" title="6">  <span class="dt">train_F                        =</span> F_PreProc_<span class="dv">3</span>_UnivClust_Train_MaG, <span class="co"># pre-definced wrapper-function: train</span></a>
<a class="sourceLine" id="cb6-7" title="7">  <span class="dt">Predict_F                      =</span> F_PreProc13_BOTH_Predict_MaG,  <span class="co"># pre-definced wrapper-function: predict</span></a>
<a class="sourceLine" id="cb6-8" title="8">  <span class="dt">param.Univ.filt.top.n.features =</span> <span class="ot">NA</span>, </a>
<a class="sourceLine" id="cb6-9" title="9">  <span class="dt">param.UnivClustRankTopN        =</span> <span class="ot">NA</span>, </a>
<a class="sourceLine" id="cb6-10" title="10">  <span class="dt">param.cluster_method_KH        =</span> <span class="ot">NA</span>, </a>
<a class="sourceLine" id="cb6-11" title="11">  <span class="dt">param.corrplot.n.clusters.k    =</span> <span class="ot">NA</span>, </a>
<a class="sourceLine" id="cb6-12" title="12">  <span class="dt">param.corrplot.n.clusters.h    =</span> <span class="ot">NA</span>, </a>
<a class="sourceLine" id="cb6-13" title="13">  <span class="dt">parame.gene.or.module          =</span> <span class="ot">NA</span>,</a>
<a class="sourceLine" id="cb6-14" title="14">  <span class="dt">param.LASSO.n.features.arbitrary=</span><span class="ot">NA</span>)</a>
<a class="sourceLine" id="cb6-15" title="15"></a>
<a class="sourceLine" id="cb6-16" title="16"><span class="co">## params currently NOT in learner, since they are not tuned/benchmarked</span></a>
<a class="sourceLine" id="cb6-17" title="17">Assay.Analyte.sep&lt;-<span class="st">'.ZZZ.'</span></a>
<a class="sourceLine" id="cb6-18" title="18"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">is.numeric</a></span>(param.impute.knn.k&lt;-<span class="dv">20</span>) </a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">param.assay.type.vec&lt;-<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'Short'</span>, <span class="st">'Long'</span>, <span class="st">'Short'</span>, <span class="st">'Short'</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="st">'Long'</span>, <span class="dv">11</span>)) <span class="co"># to be automatically generated from MAE/SE_i@metadata</span></a>
<a class="sourceLine" id="cb8-2" title="2">lrn_PreProcess_glmnet<span class="op">$</span>par.vals[[<span class="st">'param.assay.type.vec'</span>]]&lt;-param.assay.type.vec</a>
<a class="sourceLine" id="cb8-3" title="3"></a>
<a class="sourceLine" id="cb8-4" title="4">lrn_PreProcess_glmnet<span class="op">$</span>next.learner<span class="op">$</span>properties <span class="op">%&lt;&gt;%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(., <span class="st">'missings'</span>) <span class="co"># ok to add only because pre-rprocessing will make sure all NAs are imputed</span></a>
<a class="sourceLine" id="cb8-5" title="5"></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="co">## arguments for the pre-processing wrapper</span></a>
<a class="sourceLine" id="cb8-7" title="7">args_<span class="dv">1</span>&lt;-<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(</a>
<a class="sourceLine" id="cb8-8" title="8">  <span class="dt">param.Univ.filt.top.n.features   =</span> <span class="dv">30</span>, </a>
<a class="sourceLine" id="cb8-9" title="9">  <span class="dt">param.UnivClustRankTopN          =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb8-10" title="10">  <span class="dt">param.cluster_method_KH          =</span> <span class="st">'method.h'</span>, </a>
<a class="sourceLine" id="cb8-11" title="11">  <span class="dt">param.corrplot.n.clusters.k      =</span> <span class="dv">10</span>,  </a>
<a class="sourceLine" id="cb8-12" title="12">  <span class="dt">param.corrplot.n.clusters.h      =</span> <span class="fl">0.3</span>, </a>
<a class="sourceLine" id="cb8-13" title="13">  <span class="dt">parame.gene.or.module            =</span> <span class="st">'gene'</span>, </a>
<a class="sourceLine" id="cb8-14" title="14">  <span class="dt">param.LASSO.n.features.arbitrary =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb8-15" title="15"></a>
<a class="sourceLine" id="cb8-16" title="16">lrn_<span class="dv">1</span>&lt;-<span class="kw"><a href="../reference/Wrapper_Filter_1_helpers.html">Func_update_args_univ_clusters</a></span>(<span class="dt">lrn =</span> lrn_PreProcess_glmnet, <span class="dt">args_vec =</span> args_<span class="dv">1</span>, <span class="dt">lrn.id =</span> <span class="st">'lrn1'</span>)    </a></code></pre></div>
</div>
<div id="pre-processing" class="section level1">
<h1 class="hasAnchor">
<a href="#pre-processing" class="anchor"></a>3. pre-processing</h1>
<div id="scaling" class="section level2">
<h2 class="hasAnchor">
<a href="#scaling" class="anchor"></a>3.1 Scaling</h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">task_scaled&lt;-data_task <span class="op">%&gt;&gt;%</span><span class="st"> </span><span class="kw">cpoScale</span>()</a></code></pre></div>
</div>
<div id="baked-task-and-control" class="section level2">
<h2 class="hasAnchor">
<a href="#baked-task-and-control" class="anchor"></a>3.2 Baked task and $control</h2>
<p>Extracting the trained data set (after pre-processing), and other tuning parameters (alt_lambda).<br>
if module-level data analysis is done, this will include the collapsed training dataset at the module level.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">data_to_bake  &lt;-task_scaled <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">getTaskData</span>()</a>
<a class="sourceLine" id="cb10-2" title="2">target_to_bake&lt;-task_scaled <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">getTaskTargetNames</span>()</a>
<a class="sourceLine" id="cb10-3" title="3"></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="co">## bake UnivClust:</span></a>
<a class="sourceLine" id="cb10-5" title="5">baked_UnivClust&lt;-<span class="kw"><a href="../reference/Wrapper_Filter_2_train_predict.html">F_PreProc_3_UnivClust_Train_MaG</a></span>(data_to_bake, target_to_bake, <span class="dt">args =</span> lrn_<span class="dv">1</span><span class="op">$</span>par.vals) <span class="co"># ok to do with F_PreProc_3_UnivClust_Train_MaG() since no further ML is done</span></a></code></pre></div>
<pre><code>## Warning: Option grouped=FALSE enforced in cv.glmnet, since &lt; 3 observations
## per fold</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">task_baked_UnivClust&lt;-<span class="kw">makeRegrTask</span>(<span class="dt">id =</span> <span class="st">"baked_passed_univ"</span>, <span class="dt">data =</span> baked_UnivClust<span class="op">$</span>data, <span class="dt">target =</span> <span class="st">"cpep_model_decayrate"</span>)</a>
<a class="sourceLine" id="cb12-2" title="2"></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="co">## 201 features have remained</span></a>
<a class="sourceLine" id="cb12-4" title="4">task_baked_UnivClust</a></code></pre></div>
<pre><code>## Supervised task: baked_passed_univ
## Type: regr
## Target: cpep_model_decayrate
## Observations: 31
## Features:
##    numerics     factors     ordered functionals 
##         201           0           0           0 
## Missings: FALSE
## Has weights: FALSE
## Has blocking: FALSE
## Has coordinates: FALSE</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="co"># baked_UnivClust$control$glmnet_sanity %&gt;% tidy %&gt;% head</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="co"># baked_UnivClust$control$alt_lambda </span></a>
<a class="sourceLine" id="cb14-3" title="3"></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="co"># Alternatively, this will also be passed via train() returned model()$learner.model$control$</span></a></code></pre></div>
</div>
</div>
<div id="multivariate-model" class="section level1">
<h1 class="hasAnchor">
<a href="#multivariate-model" class="anchor"></a>4. multivariate model</h1>
<div id="direct-from-ml-glmnet-using-baked-skipping-train" class="section level2">
<h2 class="hasAnchor">
<a href="#direct-from-ml-glmnet-using-baked-skipping-train" class="anchor"></a>4.1 Direct from ML (glmnet), using baked (skipping train)</h2>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1">Baked_x&lt;-baked_UnivClust<span class="op">$</span>data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">-</span>cpep_model_decayrate) <span class="op">%&gt;%</span><span class="st"> </span>as.matrix</a>
<a class="sourceLine" id="cb15-2" title="2">Baked_y&lt;-baked_UnivClust<span class="op">$</span>data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(cpep_model_decayrate)</a>
<a class="sourceLine" id="cb15-3" title="3"><span class="co"># predict(model_3_glmnet, Baked_x, s=Model_UnivClust$learner.model$control$alt_lambda) %&gt;% data.frame %&gt;% pull(X1)</span></a>
<a class="sourceLine" id="cb15-4" title="4">fit_baked&lt;-<span class="kw">cv.glmnet</span>(Baked_x, Baked_y, <span class="dt">alpha =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb15-5" title="5"><span class="co"># fit_baked %&gt;% tidy</span></a>
<a class="sourceLine" id="cb15-6" title="6"><span class="co"># plot(fit_baked)</span></a>
<a class="sourceLine" id="cb15-7" title="7"><span class="co"># coef(fit_baked) include range of lambda values</span></a>
<a class="sourceLine" id="cb15-8" title="8"></a>
<a class="sourceLine" id="cb15-9" title="9"><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/coef">coef</a></span>(fit_baked, <span class="dt">s =</span> <span class="fl">0.00009</span>) <span class="op">%&gt;%</span><span class="st"> </span>tidy <span class="co"># 19 withOUT OSBP2. paper</span></a></code></pre></div>
<pre><code>## Warning: 'tidy.dgCMatrix' is deprecated.
## See help("Deprecated")</code></pre>
<pre><code>## Warning: 'tidy.dgTMatrix' is deprecated.
## See help("Deprecated")</code></pre>
<pre><code>##                                                 row column         value
## 1                                       (Intercept)      1 -1.415488e-03
## 2  FACS.ZZZ.MFI_TIGIT_KLRG1p_TIGITp_CCR7n_Naive_CD8      1  1.482111e-05
## 3                               mRNA.ZZZ.X220481_at      1 -5.172735e-05
## 4                             mRNA.ZZZ.X217607_x_at      1  1.051110e-04
## 5                               mRNA.ZZZ.X225728_at      1  7.801345e-05
## 6                               mRNA.ZZZ.X224543_at      1 -3.684326e-04
## 7                         RNAseq.Bcell.ZZZ.CCDC144A      1 -1.730506e-06
## 8                            RNAseq.Bcell.ZZZ.JAGN1      1 -1.416425e-04
## 9                             RNAseq.Bcell.ZZZ.SRRT      1  2.696179e-05
## 10                             RNAseq.CD4.ZZZ.TOP3B      1  1.745456e-04
## 11                         RNAseq.CD4.ZZZ.KIAA0319L      1  1.299520e-04
## 12                            RNAseq.CD4.ZZZ.CCDC38      1  8.078189e-05
## 13                           RNAseq.CD8.ZZZ.PLA2G4B      1  4.787649e-04
## 14                            RNAseq.CD8.ZZZ.ZNF596      1  2.044533e-04
## 15                            RNAseq.CD8.ZZZ.LRTOMT      1  8.972554e-05
## 16                      RNAseq.Wholeblood.ZZZ.MLXIP      1  6.503904e-05
## 17                               mRNA.Mods.ZZZ.ME11      1  1.448408e-05
## 18        RNAseqMods.Wholeblood.ZZZ.MEdarkturquoise      1 -1.438494e-05
## 19               Covariate_cpep_auc2hr_log_baseline      1  1.629322e-04</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1">response_direct_glmnet_baked&lt;-<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict</a></span>(fit_baked, Baked_x, <span class="dt">s =</span> fit_baked<span class="op">$</span>lambda.min) <span class="op">%&gt;%</span><span class="st"> </span>data.frame <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(X1)</a>
<a class="sourceLine" id="cb19-2" title="2"><span class="co">## with 100% train, self-predict, OK to use Baked_x since we know for sure it will include final LASSO coel that were selected from it. However, this will NOT be the case for resampling/CV</span></a></code></pre></div>
</div>
<div id="using-trains-returned-model-original-task-had-missing-values--therefore-when-re-used-for-predict-causing-missing-predictions--alternatively-use-baked-imputed-task-from-pre-processing-exactly-as-was-done-earlier" class="section level2">
<h2 class="hasAnchor">
<a href="#using-trains-returned-model-original-task-had-missing-values--therefore-when-re-used-for-predict-causing-missing-predictions--alternatively-use-baked-imputed-task-from-pre-processing-exactly-as-was-done-earlier" class="anchor"></a>4.2 using train()‘s returned model Original task had missing values. therefore, when re-used for predict, causing missing predictions. Alternatively, use ’baked’ imputed task from pre-processing (exactly as was done earlier)</h2>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1"><span class="co"># set.seed(1)</span></a>
<a class="sourceLine" id="cb20-2" title="2">Model_UnivClust&lt;-<span class="kw">train</span>(lrn_<span class="dv">1</span>, task_scaled) <span class="co">## lrn will have defaults s, that is used to extract/predict specific coef, though all s values are used for calculation</span></a></code></pre></div>
<pre><code>## Warning: Option grouped=FALSE enforced in cv.glmnet, since &lt; 3 observations
## per fold</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1"><span class="co"># Model_UnivClust$learner$next.learner$par.vals$s # default s is unchanged, unless updated directly as below</span></a>
<a class="sourceLine" id="cb22-2" title="2">train_glmnet_fit&lt;-Model_UnivClust<span class="op">$</span>learner.model<span class="op">$</span>next.model<span class="op">$</span>learner.model</a>
<a class="sourceLine" id="cb22-3" title="3"><span class="co"># coef(train_glmnet_fit) %&gt;% tidy # If s is not specified, will always use lambda.1se. this is NOT affected by the learner's par.vals</span></a>
<a class="sourceLine" id="cb22-4" title="4"><span class="co"># coef(train_glmnet_fit, s = train_glmnet_fit$lambda.1se) %&gt;% tidy</span></a>
<a class="sourceLine" id="cb22-5" title="5">coef_table&lt;-<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/coef">coef</a></span>(train_glmnet_fit, <span class="dt">s =</span> train_glmnet_fit<span class="op">$</span>lambda.min) <span class="op">%&gt;%</span><span class="st"> </span>tidy <span class="co">#  s = 0.00009</span></a></code></pre></div>
<pre><code>## Warning: 'tidy.dgCMatrix' is deprecated.
## See help("Deprecated")</code></pre>
<pre><code>## Warning: 'tidy.dgTMatrix' is deprecated.
## See help("Deprecated")</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1">coef_table</a></code></pre></div>
<pre><code>##                                                 row column         value
## 1                                       (Intercept)      1 -1.415635e-03
## 2  FACS.ZZZ.MFI_TIGIT_KLRG1p_TIGITp_CCR7n_Naive_CD8      1  1.875542e-05
## 3                               mRNA.ZZZ.X220481_at      1 -5.561646e-05
## 4                             mRNA.ZZZ.X217607_x_at      1  1.039372e-04
## 5                               mRNA.ZZZ.X225728_at      1  7.723215e-05
## 6                               mRNA.ZZZ.X224543_at      1 -3.685272e-04
## 7                         RNAseq.Bcell.ZZZ.CCDC144A      1 -2.333866e-06
## 8                            RNAseq.Bcell.ZZZ.JAGN1      1 -1.439367e-04
## 9                             RNAseq.Bcell.ZZZ.SRRT      1  2.806651e-05
## 10                             RNAseq.CD4.ZZZ.TOP3B      1  1.729028e-04
## 11                         RNAseq.CD4.ZZZ.KIAA0319L      1  1.298560e-04
## 12                            RNAseq.CD4.ZZZ.CCDC38      1  7.970259e-05
## 13                           RNAseq.CD8.ZZZ.PLA2G4B      1  4.774177e-04
## 14                            RNAseq.CD8.ZZZ.ZNF596      1  2.058385e-04
## 15                            RNAseq.CD8.ZZZ.LRTOMT      1  9.058397e-05
## 16                      RNAseq.Wholeblood.ZZZ.MLXIP      1  6.583024e-05
## 17                               mRNA.Mods.ZZZ.ME11      1  1.594887e-05
## 18        RNAseqMods.Wholeblood.ZZZ.MEdarkturquoise      1 -1.722168e-05
## 19               Covariate_cpep_auc2hr_log_baseline      1  1.660267e-04</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1"><span class="co"># Predict:</span></a>
<a class="sourceLine" id="cb27-2" title="2"><span class="co"># mlr::predict take by default the initial s, so must be updated internally from model()$control</span></a>
<a class="sourceLine" id="cb27-3" title="3">Model_UnivClust<span class="op">$</span>learner<span class="op">$</span>next.learner<span class="op">$</span>par.vals<span class="op">$</span>s <span class="co"># this is the intial s, arbitrarily defined in the original glmnet learner</span></a></code></pre></div>
<pre><code>## [1] "lambda.min"</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" title="1"><span class="co"># Model_UnivClust_my_s&lt;-Model_UnivClust # make a copy, not to over-ride</span></a>
<a class="sourceLine" id="cb29-2" title="2"><span class="co"># Model_UnivClust_my_s$learner$next.learner$par.vals$s&lt;-0.00009</span></a>
<a class="sourceLine" id="cb29-3" title="3"><span class="co"># Model_UnivClust_my_s$learner.model$control$alt_lambda$lambda.min</span></a>
<a class="sourceLine" id="cb29-4" title="4"></a>
<a class="sourceLine" id="cb29-5" title="5">mlr_predict&lt;-<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict</a></span>(Model_UnivClust, task_baked_UnivClust) <span class="co"># unlike the above coef(), the mlr::predict will be affected by the learner's par.vals. here, it will take the lambda.min, rather than the default lambda.1se</span></a>
<a class="sourceLine" id="cb29-6" title="6"></a>
<a class="sourceLine" id="cb29-7" title="7">response_direct_glmnet_train&lt;-mlr_predict<span class="op">$</span>data<span class="op">$</span>response</a></code></pre></div>
</div>
</div>
<div id="performance" class="section level1">
<h1 class="hasAnchor">
<a href="#performance" class="anchor"></a>5. Performance</h1>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/all">all</a></span>(response_direct_glmnet_train <span class="op">==</span><span class="st"> </span>response_direct_glmnet_baked) <span class="co"># sanity check</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1">rmse_direct&lt;-<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/MathFun">sqrt</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>((response_direct_glmnet_train <span class="op">-</span><span class="st"> </span>Baked_y) <span class="op">^</span><span class="st"> </span><span class="dv">2</span>)) <span class="co"># identical, so doesn't matter which one to use</span></a>
<a class="sourceLine" id="cb32-2" title="2">rmse_direct</a></code></pre></div>
<pre><code>## [1] 0.0002402502</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1"><span class="co">## featureless / intercept only</span></a>
<a class="sourceLine" id="cb34-2" title="2">y&lt;-task_scaled <span class="op">%&gt;%</span><span class="st"> </span>getTaskTargets</a>
<a class="sourceLine" id="cb34-3" title="3">y_mean&lt;-y <span class="op">%&gt;%</span><span class="st"> </span>mean</a>
<a class="sourceLine" id="cb34-4" title="4">rmse_null&lt;-<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/MathFun">sqrt</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>((y <span class="op">-</span><span class="st"> </span>y_mean) <span class="op">^</span><span class="st"> </span><span class="dv">2</span>))</a>
<a class="sourceLine" id="cb34-5" title="5"></a>
<a class="sourceLine" id="cb34-6" title="6"><span class="co"># model_intercept_only&lt;-train(makeLearner(cl='regr.featureless'), task_scaled)</span></a>
<a class="sourceLine" id="cb34-7" title="7"><span class="co"># model_intercept_only$learner.model</span></a>
<a class="sourceLine" id="cb34-8" title="8"><span class="co"># pred_featureless&lt;-predict(model_intercept_only, task_baked_UnivClust)</span></a>
<a class="sourceLine" id="cb34-9" title="9"><span class="co"># performance(pred_featureless, rmse)</span></a></code></pre></div>
</div>
<div id="model-diagnostics" class="section level1">
<h1 class="hasAnchor">
<a href="#model-diagnostics" class="anchor"></a>6. Model diagnostics</h1>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" title="1"><span class="co">## C-peptide: Truth vs Fitted:</span></a>
<a class="sourceLine" id="cb35-2" title="2"><span class="co"># plot(x = response_direct_glmnet_train, y = Baked_y)</span></a>
<a class="sourceLine" id="cb35-3" title="3">DF_fitted_trutch&lt;-<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="dt">Fitted =</span> response_direct_glmnet_train, <span class="dt">Truth =</span> Baked_y)</a>
<a class="sourceLine" id="cb35-4" title="4"><span class="kw">ggplot</span>(DF_fitted_trutch, <span class="kw">aes</span>(<span class="dt">x =</span> Fitted, <span class="dt">y =</span> Truth)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">'lm'</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb35-5" title="5"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">'C-peptide: Truth vs Fitted'</span>, <span class="dt">subtitle =</span> <span class="st">'train data only'</span>)</a></code></pre></div>
<p><img src="V_JDRF_1_selected_model_files/figure-html/Model_diagnostics-1.png" width="768"></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1"><span class="co">## Each analyte vs original y</span></a>
<a class="sourceLine" id="cb36-2" title="2">task_coef_glmnet&lt;-task_baked_UnivClust <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">subsetTask</span>(<span class="dt">features =</span> coef_table<span class="op">$</span>row[<span class="op">-</span><span class="dv">1</span>])<span class="co"># imputed</span></a>
<a class="sourceLine" id="cb36-3" title="3">DF_wide&lt;-task_coef_glmnet <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">getTaskData</span>()</a>
<a class="sourceLine" id="cb36-4" title="4">DF_long&lt;-DF_wide <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">gather</span>(<span class="st">'Analyte'</span>, <span class="st">'value'</span>, <span class="op">-</span>cpep_model_decayrate)</a>
<a class="sourceLine" id="cb36-5" title="5"><span class="co"># DF_long %&gt;% head</span></a>
<a class="sourceLine" id="cb36-6" title="6"></a>
<a class="sourceLine" id="cb36-7" title="7"><span class="kw">ggplot</span>(DF_long, <span class="kw">aes</span>(<span class="dt">x=</span>value, <span class="dt">y=</span>cpep_model_decayrate)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-8" title="8"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Analyte) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-9" title="9"><span class="st">  </span><span class="co">#geom_smooth(method = 'lm') +</span></a>
<a class="sourceLine" id="cb36-10" title="10"><span class="st">  </span><span class="kw">xlab</span>(<span class="st">'Scaled analyte value'</span>) <span class="op">+</span><span class="st"> </span><span class="kw">ylab</span>(<span class="st">'C-peptide'</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-11" title="11"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">'Figure 3: C-peptide vs each of the selected analytes'</span>)</a></code></pre></div>
<p><img src="V_JDRF_1_selected_model_files/figure-html/Model_diagnostics-2.png" width="768"></p>
</div>
<div id="benchmarking-sensitivity-to-lasso-lmbda-s-fixed-h0-3-top_n30" class="section level1">
<h1 class="hasAnchor">
<a href="#benchmarking-sensitivity-to-lasso-lmbda-s-fixed-h0-3-top_n30" class="anchor"></a>7. Benchmarking / sensitivity to LASSO lmbda (s) { fixed h=0.3, top_n=30}</h1>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" title="1"><span class="co">## We choose to more carefully select (tune) the optimal value for lambda, so predicion has to be manually, rather than straight forward using mlr::predict() function</span></a>
<a class="sourceLine" id="cb37-2" title="2"></a>
<a class="sourceLine" id="cb37-3" title="3"><span class="co"># Model_UnivClust$learner.model$control$alt_lambda</span></a>
<a class="sourceLine" id="cb37-4" title="4"></a>
<a class="sourceLine" id="cb37-5" title="5"><span class="co"># alt_lambda is by default cv.glmnet$lambda.min, or, if the above caused null model, a revised, "pushed" lambda</span></a>
<a class="sourceLine" id="cb37-6" title="6"></a>
<a class="sourceLine" id="cb37-7" title="7">fit_baked_cv&lt;-<span class="kw">cv.glmnet</span>(Baked_x, Baked_y, <span class="dt">alpha =</span> <span class="dv">1</span>, <span class="dt">nfolds =</span> Baked_x <span class="op">%&gt;%</span><span class="st"> </span>nrow)</a>
<a class="sourceLine" id="cb37-8" title="8"><span class="co"># fit_baked_cv$lambda.min</span></a>
<a class="sourceLine" id="cb37-9" title="9"><span class="co"># fit_baked_cv$lambda.1se</span></a>
<a class="sourceLine" id="cb37-10" title="10"></a>
<a class="sourceLine" id="cb37-11" title="11">bmr_s_tib_cv&lt;-<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="dt">param =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">20</span>)) <span class="op">%&gt;%</span><span class="st"> </span>as_tibble <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-12" title="12"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">s =</span> param <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">map</span>(<span class="op">~</span><span class="kw"><a href="../reference/Wrapper_Filter_1_helpers.html">cvglmnet_alternative_lambda.min_function</a></span>(fit_baked_cv, .x) ) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">map</span>(<span class="st">'pushed_lambda'</span>) <span class="op">%&gt;%</span><span class="st"> </span>unlist)</a>
<a class="sourceLine" id="cb37-13" title="13"></a>
<a class="sourceLine" id="cb37-14" title="14">bmr_s_tib_ind&lt;-baked_UnivClust<span class="op">$</span>control<span class="op">$</span>alt_lambda <span class="op">%&gt;%</span><span class="st"> </span>data.frame <span class="op">%&gt;%</span><span class="st"> </span>t <span class="op">%&gt;%</span><span class="st"> </span>data.frame <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb37-15" title="15"><span class="st">  </span>rownames_to_column <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">set_colnames</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'param'</span>, <span class="st">'s'</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as_data_frame</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-16" title="16"><span class="st">  </span><span class="kw">add_row</span>(<span class="dt">param =</span> <span class="st">'Sam'</span>, <span class="dt">s =</span> <span class="fl">0.00009</span>)</a>
<a class="sourceLine" id="cb37-17" title="17"></a>
<a class="sourceLine" id="cb37-18" title="18">bmr_s_tib&lt;-<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(bmr_s_tib_ind, bmr_s_tib_cv)</a>
<a class="sourceLine" id="cb37-19" title="19"></a>
<a class="sourceLine" id="cb37-20" title="20">bmr_s_tib <span class="op">%&lt;&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-21" title="21"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">coef_s    =</span> s <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">map</span>(<span class="op">~</span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/coef">coef</a></span>(fit_baked, <span class="dt">s =</span> .x) <span class="op">%&gt;%</span><span class="st"> </span>tidy)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-22" title="22"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">n_coef    =</span> coef_s <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">map_int</span>(<span class="op">~</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">nrow</a></span>(.x))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-23" title="23"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">predict_s =</span> s <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">map</span>(<span class="op">~</span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict</a></span>(fit_baked, Baked_x, <span class="dt">s =</span> .x) <span class="op">%&gt;%</span><span class="st"> </span>data.frame <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(X1) )) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-24" title="24"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">rmse_s    =</span> predict_s <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">map_dbl</span>(<span class="op">~</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/MathFun">sqrt</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>((.x <span class="op">-</span><span class="st"> </span>Baked_y) <span class="op">^</span><span class="st"> </span><span class="dv">2</span>))))</a>
<a class="sourceLine" id="cb37-25" title="25"></a>
<a class="sourceLine" id="cb37-26" title="26"><span class="co"># coef(fit_baked, s = baked_UnivClust$control$alt_lambda$lambda.min) %&gt;% tidy # 0.0001001846 # 20 with OSBP2</span></a>
<a class="sourceLine" id="cb37-27" title="27"><span class="co"># coef(fit_baked, s = baked_UnivClust$control$alt_lambda$lambda.1se) %&gt;% tidy # 16</span></a>
<a class="sourceLine" id="cb37-28" title="28"><span class="co"># coef(fit_baked, s = baked_UnivClust$control$alt_lambda$pushed_lambda) %&gt;% tidy # </span></a>
<a class="sourceLine" id="cb37-29" title="29"></a>
<a class="sourceLine" id="cb37-30" title="30"></a>
<a class="sourceLine" id="cb37-31" title="31"><span class="kw">ggplot</span>(bmr_s_tib, <span class="kw">aes</span>(<span class="dt">x =</span> s, <span class="dt">y =</span> rmse_s, <span class="dt">label  =</span> param)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-32" title="32"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-33" title="33"><span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">hjust=</span><span class="fl">0.1</span>, <span class="dt">vjust=</span><span class="dv">0</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-34" title="34"><span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">'Sensitivity to cv.glmnet s: top_n = 30, h=0.3'</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-35" title="35"><span class="st">  </span><span class="kw">geom_hline</span>(<span class="dt">yintercept =</span> rmse_null, <span class="dt">colour =</span> <span class="st">"red"</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-36" title="36"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/pretty">pretty</a></span>(bmr_s_tib<span class="op">$</span>rmse_s, <span class="dt">n =</span> <span class="dv">10</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb37-37" title="37"><span class="st">  </span><span class="kw">annotate</span>(<span class="st">"text"</span>, <span class="dt">label =</span> <span class="st">"Intercept only"</span>, <span class="dt">x =</span> <span class="fl">0.0001</span>, <span class="dt">y =</span> rmse_null, <span class="dt">size =</span> <span class="dv">5</span>, <span class="dt">colour =</span> <span class="st">"red"</span>)</a></code></pre></div>
<p><img src="V_JDRF_1_selected_model_files/figure-html/unnamed-chunk-1-1.png" width="768"></p>
</div>
<div id="session-information" class="section level1">
<h1 class="hasAnchor">
<a href="#session-information" class="anchor"></a>7. Session information</h1>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/sessionInfo">sessionInfo</a></span>()</a></code></pre></div>
<pre><code>## R version 3.5.0 (2018-04-23)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## Running under: Windows 10 x64 (build 14393)
## 
## Matrix products: default
## 
## locale:
## [1] LC_COLLATE=English_United States.1252 
## [2] LC_CTYPE=English_United States.1252   
## [3] LC_MONETARY=English_United States.1252
## [4] LC_NUMERIC=C                          
## [5] LC_TIME=English_United States.1252    
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] bindrcpp_0.2.2    JDRFCAV_0.1.0     impute_1.54.0    
##  [4] limma_3.36.1      biobroom_1.12.0   broom_0.5.0      
##  [7] glmnet_2.0-16     foreach_1.4.4     Matrix_1.2-14    
## [10] mlrCPO_0.3.4      mlr_2.13.9000     ParamHelpers_1.12
## [13] ggplot2_3.1.0     tibble_2.0.1      tidyr_0.8.2      
## [16] stringr_1.3.1     purrr_0.2.5       magrittr_1.5     
## [19] dplyr_0.7.8      
## 
## loaded via a namespace (and not attached):
##  [1] Rcpp_1.0.0          lattice_0.20-35     assertthat_0.2.0   
##  [4] rprojroot_1.3-2     digest_0.6.18       utf8_1.1.4         
##  [7] R6_2.3.0            plyr_1.8.4          backports_1.1.3    
## [10] evaluate_0.12       pillar_1.3.1        rlang_0.3.1        
## [13] lazyeval_0.2.1      rstudioapi_0.7      data.table_1.12.0  
## [16] checkmate_1.9.1     rmarkdown_1.11      pkgdown_1.3.0      
## [19] labeling_0.3        desc_1.2.0          splines_3.5.0      
## [22] munsell_0.5.0       compiler_3.5.0      xfun_0.4           
## [25] pkgconfig_2.0.2     BiocGenerics_0.26.0 BBmisc_1.11        
## [28] htmltools_0.3.6     tidyselect_0.2.5    roxygen2_6.1.1     
## [31] codetools_0.2-15    XML_3.98-1.16       fansi_0.4.0        
## [34] crayon_1.3.4        withr_2.1.2         MASS_7.3-49        
## [37] commonmark_1.5      grid_3.5.0          nlme_3.1-137       
## [40] gtable_0.2.0        scales_1.0.0        cli_1.0.1          
## [43] stringi_1.2.4       fs_1.2.3            parallelMap_1.4    
## [46] xml2_1.2.0          fastmatch_1.1-0     iterators_1.0.10   
## [49] tools_3.5.0         Biobase_2.40.0      glue_1.3.0         
## [52] parallel_3.5.0      survival_2.41-3     yaml_2.2.0         
## [55] colorspace_1.4-0    memoise_1.1.0       knitr_1.21         
## [58] bindr_0.1.1</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#load-raw-data-sets">1. Load raw data sets</a></li>
      <li><a href="#mlrs-learner-setup">2. mlr’s learner setup</a></li>
      <li>
<a href="#pre-processing">3. pre-processing</a><ul class="nav nav-pills nav-stacked">
<li><a href="#scaling">3.1 Scaling</a></li>
      <li><a href="#baked-task-and-control">3.2 Baked task and $control</a></li>
      </ul>
</li>
      <li>
<a href="#multivariate-model">4. multivariate model</a><ul class="nav nav-pills nav-stacked">
<li><a href="#direct-from-ml-glmnet-using-baked-skipping-train">4.1 Direct from ML (glmnet), using baked (skipping train)</a></li>
      <li><a href="#using-trains-returned-model-original-task-had-missing-values--therefore-when-re-used-for-predict-causing-missing-predictions--alternatively-use-baked-imputed-task-from-pre-processing-exactly-as-was-done-earlier">4.2 using train()‘s returned model Original task had missing values. therefore, when re-used for predict, causing missing predictions. Alternatively, use ’baked’ imputed task from pre-processing (exactly as was done earlier)</a></li>
      </ul>
</li>
      <li><a href="#performance">5. Performance</a></li>
      <li><a href="#model-diagnostics">6. Model diagnostics</a></li>
      <li><a href="#benchmarking-sensitivity-to-lasso-lmbda-s-fixed-h0-3-top_n30">7. Benchmarking / sensitivity to LASSO lmbda (s) { fixed h=0.3, top_n=30}</a></li>
      <li><a href="#session-information">7. Session information</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by The package maintainer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
